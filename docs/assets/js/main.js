"use strict";const formElement=document.querySelector(".js-form"),searchInput=document.querySelector(".js-search"),btnElement=document.querySelector(".js-btn"),showsResult=document.querySelector(".js-tvshows"),favElements=document.querySelector(".js-list-favorites");let series=[],favSeries=[];const getDataFromApi=()=>{const e=searchInput.value;fetch("//api.tvmaze.com/search/shows?q= + "+e).then(e=>e.json()).then(e=>{series=e,renderShows(),setInLocalStorage()})};function handleSearch(){getDataFromApi()}function renderShows(){let e="";for(let s=0;s<series.length;s++){let t=series[s].show.image,a=series[s].show.id;isFav(series[s])?e+=`<li class="js__show js__show_favorite" id="${a}">`:e+=`<li class="js__show" id="${a}">`,e+='<div class="js__show--container">',e+=null===t?`<img class="js__show--img"src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" title="${series[s].show.name}" alt="${series[s].show.name} cover not available"/>`:`<img src="${t.medium}" alt="Show image" ${series[s].show.name}" class="js__show--img"></img>`,e+=`<h5 class="js__show--name">${series[s].show.name}</h5>`,e+="</div>",e+="</li>"}showsResult.innerHTML=e,listenFavs()}function handleForm(e){e.preventDefault()}function isFav(e){return!!favSeries.find(s=>s.show.id===e.show.id)}const selectedFavs=e=>{const s=parseInt(e.currentTarget.id);let t=series.find(e=>s===e.show.id),a=favSeries.findIndex(e=>s===e.show.id);-1===a?favSeries.push(t):favSeries.splice(a,1)};function listenFavs(){const e=document.querySelectorAll(".js__show");for(const s of e)s.addEventListener("click",handleFavs)}function renderFavs(){let e="";for(let s=0;s<favSeries.length;s++){let t=favSeries[s].show.image;e+=`<li class="js__favshow" id="${favSeries[s].show.id}">`,e+='<div class="js__favshow--container">',e+=null===t?`<img class="js__favshow--img"src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" title="${favSeries[s].show.name}" alt="${favSeries[s].show.name} cover not available"/>`:`<img src="${t.medium}" alt="Show image" ${favSeries[s].show.name}" class="js__favshow--img"></img>`,e+=`<h5 class="js__favshow--name">${favSeries[s].show.name}</h5>`,e+="</div>",e+="</li>"}favElements.innerHTML=e,setInLocalStorage()}function setInLocalStorage(){const e=JSON.stringify(favSeries);localStorage.setItem("favSeries",e)}function getFromLocalStorage(){const e=localStorage.getItem("favSeries");if(null===e)getDataFromApi();else{const s=JSON.parse(e);favSeries=s,renderFavs()}}function handleFavs(e){selectedFavs(e),renderFavs(),renderShows()}getFromLocalStorage(),formElement.addEventListener("submit",handleForm),btnElement.addEventListener("click",handleSearch);